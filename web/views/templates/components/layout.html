{{define "layout"}}
	<!doctype html>
	<html lang="en">
		<head>
			<meta charset="UTF-8" />
			<meta name="viewport" content="width=device-width, initial-scale=1" />
			<title>{{block "title" .}}{{.Config.Site}}{{end}}</title>
			<link
				rel="preload"
				href="/assets/fonts/inter/inter-latin-wght-normal.woff2"
				as="font"
				type="font/woff2"
				crossorigin
			/>
			<link rel="icon" href="/assets/favicon.ico" />
			<link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
			<link rel="stylesheet" href="/assets/css/global.css" />
			<script src="/assets/scripts/htmx.min.js" defer></script>
			<script src="/assets/scripts/index.js" type="module"></script>
			<script src="/assets/scripts/local-time.js" type="module"></script>
			{{block "head" .}}
			{{end}}
		</head>
		<body>
			{{block "body" .}}
				<div class="flex flex-col min-h-full">
					{{template "header" .}}
					<div id="banner-container">
						{{if .LayoutData.Error}}
							{{template "error-banner" kv "Error" .LayoutData.Error}}
						{{end}}
					</div>
					<div
						id="content"
						class="flex flex-col p-6 sm:p-8 grow max-w-screen-xl mx-auto w-full mb-32"
					>
						{{block "content" .}}
						{{end}}
					</div>
					<footer class="flex py-2 px-4 border-t border-base-100">
						<div class="flex w-full text-sm" hx-boost="true">
							<a href="/" class="text-base-500 hover:text-base-900">
								neverexpire.xyz
							</a>
							<a
								href="/privacy"
								class="text-base-500 hover:text-base-900 ml-auto"
							>
								Privacy Policy
							</a>
						</div>
					</footer>
				</div>
			{{end}}
		</body>
	</html>
{{end}}

{{define "header"}}
	<header class="flex px-3 sm:px-4 mb-4 border-b border-base-100">
		<nav hx-boost="true" class="flex items-center w-full max-sm:flex-wrap">
			<a href="/" class="flex items-center px-2 py-2 sm:py-3 max-sm:-order-1">
				{{template "logo"}}
			</a>
			<div
				class="sm:ml-auto flex items-center max-sm:w-full max-sm:order-3 gap-1"
			>
				{{if .LayoutData.User}}
					<a
						href="/hosts"
						class="font-medium text-base-500 hover:text-base-800 p-2"
					>
						Hosts
					</a>
					<a
						href="/account/api"
						class="font-medium text-base-500 hover:text-base-800 p-2"
					>
						API
					</a>
					<a
						href="/notifications"
						class="font-medium text-base-500 hover:text-base-800 p-2"
					>
						<span
							class="relative flex"
							hx-get="/partials/notifications/count"
							hx-trigger="load"
							hx-target="#notification-badge"
							hx-swap="innerHTML settle:0.025s"
						>
							<span class="sm:hidden">Notifications</span>
							<span id="notification-badge" class="contents">
								{{template "notification-badge" kv "Count" .NotificationCount}}
							</span>
							<span class="max-sm:hidden">
								{{template "icon-bell" kv "size" "22"}}
							</span>
						</span>
					</a>
				{{end}}
			</div>
			{{if .LayoutData.User}}
				<details
					id="account-menu"
					class="ml-auto sm:ml-2 relative max-sm:order-2"
				>
					<summary
						id="menu-toggle"
						class="list-none select-none cursor-pointer py-2 flex gap-1 text-base-500 hover:text-base-800 font-medium"
					>
						{{$username := index (split .LayoutData.User.Email "@") 0}}
						{{$username}}
						{{template "icon-chevron-down"}}
					</summary>
					<ul
						class="flex flex-col min-w-36 absolute z-[999] right-0 bg-base-white border border-base-200 rounded-md overflow-hidden"
					>
						<li>
							<a
								href="/settings"
								class="flex items-center gap-2 font-medium text-base-600 hover:bg-base-100 px-4 py-2 border-b border-base-200"
							>
								{{template "icon-cog" kv "size" "20"}}
								Settings
							</a>
						</li>
						<li>
							<a
								href="/logout"
								hx-boost="false"
								class="whitespace-nowrap flex items-center gap-2 text-red-600/80 hover:bg-base-100 font-medium px-4 py-2"
							>
								{{template "icon-logout" kv "size" "20"}}
								Sign out
							</a>
						</li>
					</ul>
				</details>
			{{else}}
				<a href="/login" class="ml-auto text-primary-500 font-medium py-3">
					Log in
				</a>
			{{end}}
		</nav>
	</header>
{{end}}
